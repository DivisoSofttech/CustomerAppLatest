<ion-header class="mobile-only">
  <app-store-header *ngIf="store != undefined" [name]="store.name" [storeId]="store.regNo" [store]="store"
    (searchEnable)="toggleFabButton($event)" (categoryfilterClicked)="categoryListPopOver($event)"></app-store-header>
</ion-header>

<ion-content appScrollbarTheme>
  <ion-fab class="animated animation-duration mobile-only"
    [ngClass]="(currentSegment === 'menu' && showCatgeoryFilterFab) ? 'rotateIn' : 'rotateOut'" vertical="bottom"
    horizontal="end" slot="fixed">
    <ion-fab-button (click)="categoryListPopOver($event)">
      <ion-icon name="pizza"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-grid class="ion-no-padding full-height">
    <ion-row class="ion-no-padding full-height">
      <ion-col size="12" size-lg="8" class="ion-no-padding">
        <ion-row>
          <ion-header class="desktop-only" no-border>
            <app-store-header *ngIf="store != undefined" [name]="store.name" [storeId]="store.regNo" [store]="store"
              (searchEnable)="toggleFabButton($event)"></app-store-header>
          </ion-header>
          <ion-col size="12" size-lg="12" class="ion-no-padding">
            <app-loading *ngIf="showRestaurantLoading === true" [type]="'restaurant-detail'"></app-loading>
            <app-restaurant-card *ngIf="store != undefined" [store]="store" [viewType]="'detailedCard'">
            </app-restaurant-card>
          </ion-col>
          <ion-col size="12" size-lg="12" class="ion-no-padding">
            <div class="bg-white">
              <ion-segment color="success" (ionChange)="segmentChanged($event)" [(ngModel)]="currentSegment"
                class="slider-tabs">
                <ion-segment-button value="menu" checked>
                  <ion-label>Menu</ion-label>
                </ion-segment-button>
                <ion-segment-button class="mobile-only" value="reviews">
                  <ion-label>Reviews</ion-label>
                </ion-segment-button>
                <ion-segment-button value="info">
                  <ion-label>Info</ion-label>
                </ion-segment-button>
              </ion-segment>

              <ion-slides [options]="slideOptions" (ionSlideDidChange)="slideChanged($event)">
                <ion-slide>
                  <ion-row class="categories" *ngIf="store !== undefined && showCategoryWiseProducts === false"
                    no-margin no-padding>
                    <ion-col size="12" class="ion-no-padding">
                      <ion-item color="primary">
                        <ion-text>
                          {{selectedCategory}}
                        </ion-text>
                      </ion-item>
                    </ion-col>
                    <ion-col size="12" size-lg="6" *ngFor="let stockCurrent of stockCurrents">
                      <app-product-card [store]="store" [stockCurrent]="stockCurrent" [type]=""></app-product-card>
                    </ion-col>
                  </ion-row>

                  <div class="categories" *ngIf="showCategoryWiseProducts === true">
                    <ion-spinner name="circles" class="center" *ngIf="categories.length === 0"></ion-spinner>
                    <div class="category" *ngFor="let category of categories">
                      <ion-list>
                        <ion-item color="primary" lines="none">
                          <ion-avatar>
                            <ion-img [src]="
                                      'data:' +
                                      category.imageContentType +
                                      ';base64,' +
                                      category.image
                                      " class="imageShow">
                            </ion-img>
                          </ion-avatar>
                          <ion-label margin>{{category.name | titlecase}}</ion-label>
                        </ion-item>
                        <app-category-wise-products-card *ngIf="store !== undefined" [category]="category"
                          [store]="store">
                        </app-category-wise-products-card>
                      </ion-list>
                    </div>
                  </div>
                </ion-slide>

                <ion-slide>
                  <app-review *ngIf="store != undefined" [store]="store"></app-review>
                </ion-slide>
                <ion-slide>
                  <ion-grid>
                    <ion-row *ngIf="store !== undefined">
                      <ion-col size="12" *ngIf="store.location !== null">
                        <app-map [showActiveLocation]="'false'"></app-map>
                      </ion-col>
                      <ion-col size="12" *ngIf="store !== undefined">
                        <ion-text *ngIf="store.info">
                          <p>{{ store.info }}</p>
                        </ion-text>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-slide>
              </ion-slides>

              <ion-refresher slot="fixed" (ionRefresh)="refresh($event)">
                <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh"
                  refreshingSpinner="circles">
                </ion-refresher-content>
              </ion-refresher>
            </div>
          </ion-col>
        </ion-row>
        <ion-row class="desktop-only cart-row">
          <app-cart (viewClick)="navigateBasket()"></app-cart>
        </ion-row>
      </ion-col>
      <ion-col size="12" size-lg="4" class="desktop-only br-left ion-no-padding">
        <ion-item color="light" lines="full">
          <ion-label *ngIf="store !== undefined">Reviews <span
              *ngIf="store.reviews !== null">({{store.reviews.length}})</span></ion-label>
        </ion-item>
        <app-review *ngIf="store != undefined" [store]="store"></app-review>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer class="animated animation-duration mobile-only"
  [ngClass]="currentSegment === 'menu' ? 'slideInUp': 'slideOutDown'">
  <app-cart (viewClick)="navigateBasket()"></app-cart>
</ion-footer>