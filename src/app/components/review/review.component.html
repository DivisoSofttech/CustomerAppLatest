
<ion-card *ngIf="guest">
  <ion-card-content text-center (click)="loginModal()">
    Login To Post Reviews
  </ion-card-content>  
</ion-card>

<ion-card no-padding *ngIf="!guest">
  <ion-card-content>
    <ion-textarea text-left no-padding [(ngModel)]="review.review" rows="1" type="text"
      placeholder="Type in your thoughts..."></ion-textarea>
  </ion-card-content>
  <ion-card-footer>
    <ion-grid>
      <ion-row>
        <ion-col>
          <rating [rate]="rate.rating" (rateChange)="updateRating($event)"></rating>
        </ion-col>
        <ion-col text-right>
          <ion-button (click)="postReview()" fill="medium">
            <ion-icon slot="icon-only" name="send"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card-footer>
</ion-card>

<app-loading *ngIf="showReviewLoading === true" [type]="'review'"></app-loading>

<ion-list>

  <ion-card *ngIf="rateReviews.length === 0">
    <ion-card-content class="mfont">
      Reviews (0)
    </ion-card-content>
  </ion-card>

  <ion-card *ngFor="let rr of rateReviews;let i = index">
      <ion-item lines="full">
          <ion-avatar slot="start"
          *ngIf="customers[i] !== undefined && customers[i].photo === null">
            <ion-img
              *ngIf="customers[i].photo === null"
              src="assets/images/user.png"
              class="profileImage"
            ></ion-img>
            <ion-img *ngIf="customers[i] !== undefined && customers[i].photo !== null"
              [src]=" 'data:' +
              customers[i].photoContentType +
              ';base64,' +
              customers[i].photo
            "
            class="imageShow"
          >
          </ion-img>
          </ion-avatar>

          <ion-text >
            <p>{{ rr.review.userName | uppercase }}</p>
            <p>{{rr.review.reviewedDate | date:'short' }}</p>
          </ion-text>
        </ion-item>

      <ion-grid>
        <ion-row>
          <ion-col size="12" text-left>
            <ion-text padding-left>
              <p class="mg-left">{{
                    rr.review.review
                  }}</p>
            </ion-text>
          </ion-col>
          <ion-col size="12">
            <rating text-center [rate]="rr.rating.rating" [readonly]="true"></rating>
            </ion-col>
        </ion-row>
      </ion-grid>

  </ion-card>

</ion-list>
