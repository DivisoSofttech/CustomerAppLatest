<!--Normal View-->

<ion-card class="ion-no-padding" *ngIf="viewType === 'normal'">
  <span
    class="ribbon6"
    *ngIf="!(currentTime | closed: store.openingTime:store.closingTime)"
    >Closed</span
  >
  <ion-card-header (click)="showHotelMenu(store.regNo)">
    <ion-item lines="none">
      <ion-img
        no-margin
        slot="start"
        *ngIf="store.imageLink !== ' '"
        slot="start"
        [src]="store.imageLink"
        class="imageShow"
      >
      </ion-img>
      <ion-icon
        no-margin
        slot="start"
        name="image"
        *ngIf="store.imageLink === ''"
        slot="start"
        [src]="store.imageLink"
        class="imageShowTemp"
      >
      </ion-icon>
      <ion-label style="margin-left:15px">
        <ion-text word-wrap text-wrap class="category">
          <h2 class="store-name fnt-sserif">
            {{ store.name + ', ' | titlecase }}
            <small *ngIf="store.storeAddress" class="cl-grey">{{
              (store.storeAddress.city | titlecase)
            }}</small>
          </h2>
          <ion-text class="distanceText" *ngIf="distance">{{distance | number:'1.2-2'}}KM Away</ion-text>
          <h3 class="medium overflow-text-wrap fnt-sserif cl-grey">
            {{ categories | arrayFormater }}
          </h3>
          <h4
            class="medium overflow-text-wrap fnt-sserif cl-grey"
            style="color:#56a232"
          >
            {{ deliveryTypes | arrayFormater: "only" }}
          </h4>
          <h3 class="small fnt-sserif cl-grey" *ngIf="deliveryInfos.length > 0">
            Delivering From
            {{ deliveryInfos[0].startingTime | date: "shortTime" }}
          </h3>
          <h3 class="small fnt-sserif cl-grey" *ngIf="store.minAmount">
            {{ "Min spend: &#8364;" + store.minAmount }}
          </h3>
          <h3
            class="small fnt-sserif cl-grey"
            *ngIf="
              store.storeSettings.deliveryCharge !== undefined && deliveryOk
            "
          >
            <span *ngIf="store.storeSettings.deliveryCharge > 0">
              Delivery Charge &#8364;{{
                store.storeSettings.deliveryCharge
              }}</span
            >
          </h3>
         
            
          <ion-badge
            color="success"
            *ngIf="store.storeSettings.deliveryCharge === 0 && deliveryOk"
          >
            Free delivery</ion-badge
          >
          <h5
            class="medium fnt-sserif cl-grey"
            class="no-wrap"
            *ngIf="
              store.openingTime != undefined && store.closingTime != undefined
            "
          >
            {{ store.openingTime | date: "shortTime" }} to
            {{ store.closingTime | date: "shortTime" }}
          </h5>
        </ion-text>
      </ion-label>
    </ion-item>
  </ion-card-header>
  <ion-card-content *ngIf="store.name" class="ion-no-padding">
    <ion-grid no-padding>
      <ion-row>
        <ion-col
          size="10"
          text-center
          class="ion-no-padding"
          *ngIf="store != undefined"
        >
          <ion-buttons>
            <rating [rate]="store.totalRating" [readonly]="true"></rating>
            <ion-button *ngIf="reviewCount" disabled>{{
              "(" + reviewCount + ")"
            }}</ion-button>
          </ion-buttons>
        </ion-col>
        <ion-col size="2" justify-content-center text-center no-padding>
          <ion-buttons justify-content-center text-center>
            <ion-button
              fill="none"
              (click)="addToFavourite(store)"
              *ngIf="!isFavourite && !isGuest"
            >
              <ion-icon slot="icon-only" name="heart-empty"></ion-icon>
            </ion-button>
            <ion-button
              fill="none"
              (click)="removeFromFavourite(store)"
              *ngIf="isFavourite && !isGuest"
            >
              <ion-icon color="danger" slot="icon-only" name="heart"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card-content>
</ion-card>

<!--Detailed View-->
<div class="container" *ngIf="viewType === 'detailedCard'">
  <ion-card
    color="danger"
    class="closeCard"
    *ngIf="!(currentTime | closed: store.openingTime:store.closingTime)"
  >
    <ion-card-content>
      <ion-card-title>Closed</ion-card-title>
      <ion-card-subtitle>
        Serving in
        {{ currentTime | dateDifference: store.openingTime:store.closingTime }}
      </ion-card-subtitle>
      <ion-card-subtitle *ngIf="isPreOrderAvailable">
        <ion-text color="success">
          <h2><b>Preorder Available </b></h2>
        </ion-text>
      </ion-card-subtitle>
      <ion-card-subtitle
        *ngIf="
          !isPreOrderAvailable && store.preOrderSettings.isPreOrderAvailable
        "
      >
        <ion-text color="success">
          <h2>
            <b
              >Preorder Available From
              {{ store.preOrderSettings.fromTime | date: "shortTime" }} to
              {{ store.preOrderSettings.toTime | date: "shortTime" }}
            </b>
          </h2>
        </ion-text>
      </ion-card-subtitle>
    </ion-card-content>
  </ion-card>
  <ion-img
  *ngIf="store.imageLink"
  slot="start"
  [src]="store.imageLink"
  class="restaurantImage"
></ion-img>
  <ion-grid class="overlay">
    <ion-row>
      <ion-col size="12">
          <ion-text>
              <h2>
                <strong>{{ store.name | uppercase }}</strong>
                <small>{{ ", " + (store.storeAddress.city | titlecase) }}</small>
              </h2>
              <p>
                {{ store.openingTime | date: "shortTime" }} to
                {{ store.closingTime | date: "shortTime" }}
              </p>
              <p class="rating">
                {{ store.totalRating | number: "1.1-1" }}
                <ion-icon *ngIf="store.totalRating === 0.0" name="star-outline"></ion-icon>
                <ion-icon *ngIf="store.totalRating > 4" name="star-half"></ion-icon>
                <ion-icon *ngIf="store.totalRating === 5.0" name="star"></ion-icon>
              </p>
            </ion-text>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>
