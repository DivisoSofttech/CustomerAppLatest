{"version":3,"sources":["./src/app/pages/restaurant/restaurant.page.html","./src/app/pages/restaurant/restaurant.module.ts","./src/app/pages/restaurant/restaurant.page.scss","./src/app/pages/restaurant/restaurant.page.ts"],"names":[],"mappings":"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","file":"pages-restaurant-restaurant-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <app-header (placeChanged)=\\\"updatedLocation($event)\\\"></app-header>\\n</ion-header>\\n<ion-content>\\n  <app-map></app-map>\\n  <app-banner></app-banner>\\n\\n  <ion-list>\\n    <div class=\\\"highlightText\\\">\\n      <ion-label>\\n        <h2>What's Nearby!</h2>\\n      </ion-label>\\n    </div>\\n    <app-restaurant-card\\n      *ngFor=\\\"let store of stores\\\"\\n      [store]=\\\"store\\\"\\n    ></app-restaurant-card>\\n  </ion-list>\\n\\n  <app-loading *ngIf=\\\"showLoading === true\\\" [type]=\\\"'restaurant'\\\"></app-loading>\\n\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadMoreStores($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\"\\n    >\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content\\n      pullingIcon=\\\"arrow-dropdown\\\"\\n      pullingText=\\\"Pull to refresh\\\"\\n      refreshingSpinner=\\\"circles\\\"\\n    >\\n    </ion-refresher-content>\\n  </ion-refresher>\\n</ion-content>\\n<ion-footer>\\n  <app-filter\\n    *ngIf=\\\"showFilters\\\"\\n    (closeFilter)=\\\"toggleFilteromponent()\\\"\\n  ></app-filter>\\n  <app-footer \\n  (filter)=\\\"toggleFilteromponent()\\\"\\n  [currentRoute]='restaurant'\\n  ></app-footer>\\n</ion-footer>\\n\"","import { FilterComponent } from './../../components/filter/filter.component';\nimport { BannerComponent } from './../../components/banner/banner.component';\nimport { HeaderComponent } from './../../components/header/header.component';\nimport { ComponentsModule } from './../../components/components.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RestaurantPage } from './restaurant.page';\nimport { RestaurantCardComponent } from 'src/app/components/restaurant-card/restaurant-card.component';\nimport { LoadingComponent } from 'src/app/components/loading/loading.component';\nimport { FooterComponent } from 'src/app/components/footer/footer.component';\nimport { MapComponent } from 'src/app/components/map/map.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RestaurantPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RestaurantPage],\n  entryComponents: [HeaderComponent ,     FooterComponent, BannerComponent , RestaurantCardComponent , \n    FilterComponent, LoadingComponent,   MapComponent]\n})\nexport class RestaurantPageModule {}\n","module.exports = \".highlightText {\\n  padding: 3px 13px;\\n  background: #f8f4f4;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2ppc2hudWovRGVza3RvcC9Xb3JrL0N1c3RvbWVyQXBwTGF0ZXN0L3NyYy9hcHAvcGFnZXMvcmVzdGF1cmFudC9yZXN0YXVyYW50LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvcmVzdGF1cmFudC9yZXN0YXVyYW50LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0VBQ0EsbUJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Jlc3RhdXJhbnQvcmVzdGF1cmFudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGlnaGxpZ2h0VGV4dCB7XG4gIHBhZGRpbmc6IDNweCAxM3B4O1xuICBiYWNrZ3JvdW5kOiAjZjhmNGY0O1xufVxuIiwiLmhpZ2hsaWdodFRleHQge1xuICBwYWRkaW5nOiAzcHggMTNweDtcbiAgYmFja2dyb3VuZDogI2Y4ZjRmNDtcbn0iXX0= */\"","import { StoreDTO } from './../../api/models/store-dto';\nimport { FilterService, FILTER_TYPES } from './../../services/filter.service';\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Util } from 'src/app/services/util';\nimport { IonInfiniteScroll, IonRefresher, IonSlides } from '@ionic/angular';\nimport { NGXLogger } from 'ngx-logger';\nimport { MapComponent } from 'src/app/components/map/map.component';\nimport { RouteService } from 'src/app/services/route.service';\n\n@Component({\n  selector: 'app-restaurant',\n  templateUrl: './restaurant.page.html',\n  styleUrls: ['./restaurant.page.scss']\n})\nexport class RestaurantPage implements OnInit {\n\n  showLoading = true;\n\n  showFilters = false;\n\n  page = 0;\n\n  stores: StoreDTO[] = [];\n\n  @ViewChild(IonInfiniteScroll , null) ionInfiniteScroll: IonInfiniteScroll;\n  @ViewChild(IonRefresher , null) IonRefresher: IonRefresher;\n  @ViewChild(MapComponent , null) mapComponent: MapComponent;\n\n  constructor(\n    private filter: FilterService,\n    private util: Util,\n    private logger: NGXLogger,\n  ) {}\n\n  ngOnInit() {\n    this.getStores();\n  }\n\n  updatedLocation(event) {\n    this.logger.info('Changed Current Location - LatLon ' , event);\n    this.filter.setCoordinates(event.latLon);\n    // this.logger.info('Setting Distance_wise Filter');\n    // this.filter.setFilter(FILTER_TYPES.DISTANCE_WISE);\n    // this.logger.info('Getting Stores');\n  }\n\n  getStores() {\n    this.filter.getSubscription().subscribe(data => {\n      this.stores = [];\n      this.filter.getStores(0, (totalElements, totalPages, stores) => {\n        if (totalPages === 1) {\n          this.logger.info('Disabling Infinite Scroll');\n          this.toggleInfiniteScroll();\n        }\n        this.logger.info('Got Stores ' , data);\n        stores.forEach(s => {\n          this.stores.push(s);\n        });\n        this.mapComponent.setStores(stores);\n        this.showLoading = false;\n        this.toggleIonRefresher();\n      });\n    });\n  }\n\n  loadMoreStores(event) {\n    this.logger.info('Load More Stores if exists');\n    this.page++;\n    this.filter.getStores(this.page, (totalElements, totalPages, stores) => {\n      if (this.page === totalPages) {\n        this.toggleInfiniteScroll();\n      }\n      if (totalPages === 1) {\n        this.toggleInfiniteScroll();\n      } else {\n        console.log(stores);\n        stores.forEach(s => {\n          this.stores.push(s);\n        });\n      }\n    });\n  }\n\n  doRefresh(event) {\n    this.logger.info('Refreshing Page');\n    this.getStores();\n  }\n\n  toggleInfiniteScroll() {\n    this.ionInfiniteScroll.disabled = !this.ionInfiniteScroll.disabled;\n  }\n\n  toggleIonRefresher() {\n    this.IonRefresher.complete();\n  }\n\n  toggleFilteromponent() {\n    this.showFilters = !this.showFilters;\n  }\n}\n"],"sourceRoot":""}